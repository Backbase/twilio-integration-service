databaseChangeLog:
- changeSet:
    id: adition_table
    author: Paulo Cardoso
    changes:
    - createTable:
        tableName: ext_messaging
        columns:
        - column:
            constraints:
              nullable: false
            name: ext_messaging_id
            type: VARCHAR(255)
        - column:
            name: property_value
            type: VARCHAR(500)
        - column:
            constraints:
              nullable: false
            name: property_key
            type: VARCHAR(50)
- changeSet:
    id: main_table
    author: Paulo Cardoso
    changes:
    - createTable:
        tableName: messaging
        columns:
        - column:
            constraints:
              nullable: false
            name: id
            type: VARCHAR(255)
        - column:
            name: user_id
            type: VARCHAR(255)
        - column:
            name: phone_number
            type: VARCHAR(255)
        - column:
            name: transaction_type
            type: TINYINT(2)
        - column:
            name: transaction_value
            type: INT(30)
        - column:
            name: messaging
            type: INT(5)
        - column:
            name: verified
            type: TINYINT(1)
- changeSet:
    id: fk_key_additions
    author: Paulo Cardoso
    changes:
    - addPrimaryKey:
        columnNames: ext_messaging_id, property_key
        constraintName: pk_ext_messaging
        tableName: ext_messaging
- changeSet:
    id: pk_key_messaging
    author: Paulo Cardoso
    changes:
    - addPrimaryKey:
        columnNames: id
        constraintName: pk_messaging
        tableName: messaging
- changeSet:
    id: add_fk_messaging_ext
    author: Paulo Cardoso
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: ext_messaging_id
        baseTableName: ext_messaging
        constraintName: fk_messaging_ext
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: messaging
- changeSet:
    author: Paulo Cardoso
    id: data_messaging
    changes:
      loadData: 
        file: ${data.messaging}
        tableName: messaging
        columns:
        - column:
          name: id
        - column:
          name: user_id
        - column:
          name: phone_number
        - column:
          name: transaction_type
        - column:
          name: transaction_value
        - column:
          name: messaging
        - column:
          name: verified
- changeSet:
    author: Paulo Cardoso
    id: data_ext_messaging
    changes:
      loadData: 
        file: ${data.ext_messaging}
        tableName: ext_messaging
        columns:
          - column:
              name: ext_messaging_id
          - column:
              name: property_value
          - column:
              name: property_key
